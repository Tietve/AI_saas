# =============================================================================
# ANALYTICS SERVICE - Environment Variables
# Port: 3004
# =============================================================================
#
# Copy this file to .env and fill in your values
# Most variables can be inherited from root .env file
#
# =============================================================================

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=3004
NODE_ENV=development
LOG_LEVEL=info

# =============================================================================
# CLICKHOUSE DATABASE
# =============================================================================
# ClickHouse for analytics data (REQUIRED)
CLICKHOUSE_HOST=localhost
CLICKHOUSE_PORT=8123
CLICKHOUSE_USER=analytics
CLICKHOUSE_PASSWORD=analytics_password
CLICKHOUSE_DATABASE=analytics_db

# =============================================================================
# MESSAGE QUEUE - RabbitMQ
# =============================================================================
# For consuming analytics events (REQUIRED)
RABBITMQ_URL=amqp://admin:admin@localhost:5672
RABBITMQ_EXCHANGE=analytics.events
RABBITMQ_QUEUE=analytics_events_queue
RABBITMQ_PREFETCH=10
RABBITMQ_HEARTBEAT=60

# =============================================================================
# MONGODB (Optional - for logs)
# =============================================================================
MONGODB_URL=mongodb://mongo:mongo@localhost:27017/admin
MONGODB_DATABASE=analytics_logs
MONGODB_POOL_SIZE=10

# =============================================================================
# MONITORING & OBSERVABILITY (Optional)
# =============================================================================

# Prometheus Metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_PATH=/metrics

# Sentry Error Tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# Jaeger Distributed Tracing
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831
JAEGER_SAMPLER_TYPE=probabilistic
JAEGER_SAMPLER_PARAM=0.1
JAEGER_SERVICE_NAME=analytics-service

# =============================================================================
# AUTHENTICATION (Optional - for API endpoints)
# =============================================================================
# For JWT verification if exposing HTTP endpoints
AUTH_SECRET=your-256-bit-secret-key-here-change-this-in-production

# =============================================================================
# NOTES
# =============================================================================
# - This service handles: Analytics data ingestion, processing, querying
# - Required: CLICKHOUSE_HOST, RABBITMQ_URL
# - Consumes events from RabbitMQ and stores in ClickHouse
# - Optional: MongoDB for detailed log storage
# - See docs/CONFIGURATION.md for complete reference
