# =============================================================================
# BILLING SERVICE - PRODUCTION ENVIRONMENT
# =============================================================================
# This file contains service-specific overrides for production
# Inherits from root .env file
# =============================================================================

# Service Configuration
NODE_ENV=production
PORT=3003
SERVICE_NAME=billing-service

# Database (Uses shared PostgreSQL)
DATABASE_URL=postgresql://postgres:${POSTGRES_PASSWORD}@postgres:5432/saas_db?schema=public

# Redis (Uses shared Redis)
REDIS_URL=redis://redis:6379/2
REDIS_PASSWORD=
REDIS_DB=2

# Auth Configuration
AUTH_SECRET=${AUTH_SECRET}
AUTH_SERVICE_URL=http://auth-service:3001

# Stripe Configuration
STRIPE_SECRET_KEY=${STRIPE_SECRET_KEY}
STRIPE_PUBLISHABLE_KEY=${STRIPE_PUBLISHABLE_KEY}
STRIPE_WEBHOOK_SECRET=${STRIPE_WEBHOOK_SECRET}
STRIPE_API_VERSION=2023-10-16

# Subscription Plans
STRIPE_PRICE_ID_FREE=${STRIPE_PRICE_ID_FREE}
STRIPE_PRICE_ID_PRO=${STRIPE_PRICE_ID_PRO}
STRIPE_PRICE_ID_ENTERPRISE=${STRIPE_PRICE_ID_ENTERPRISE}

# Plan Limits
FREE_MONTHLY_TOKEN_QUOTA=100000
PRO_MONTHLY_TOKEN_QUOTA=1000000
ENTERPRISE_MONTHLY_TOKEN_QUOTA=10000000

FREE_MONTHLY_UPGRADE_QUOTA=1000
PRO_MONTHLY_UPGRADE_QUOTA=10000
ENTERPRISE_MONTHLY_UPGRADE_QUOTA=100000

FREE_MONTHLY_EMBEDDING_QUOTA=10000
PRO_MONTHLY_EMBEDDING_QUOTA=100000
ENTERPRISE_MONTHLY_EMBEDDING_QUOTA=1000000

# Billing Configuration
TRIAL_PERIOD_DAYS=14
GRACE_PERIOD_DAYS=3
AUTO_DOWNGRADE_ON_FAILURE=true

# Monitoring
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Distributed Tracing
JAEGER_AGENT_HOST=jaeger
JAEGER_AGENT_PORT=6831
JAEGER_SERVICE_NAME=billing-service

# Logging
LOG_LEVEL=info

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Health Check
HEALTH_CHECK_ENABLED=true

# Email Notifications
EMAIL_ON_SUBSCRIPTION_CREATED=true
EMAIL_ON_SUBSCRIPTION_CANCELLED=true
EMAIL_ON_PAYMENT_FAILED=true
EMAIL_ON_TRIAL_ENDING=true
