# =============================================================================
# UPSTREAM DEFINITIONS
# Define backend service pools for load balancing
# =============================================================================

upstream auth_backend {
    least_conn;
    server auth-service:3001 max_fails=3 fail_timeout=30s;
    keepalive 32;
}

upstream chat_backend {
    least_conn;
    server chat-service:3002 max_fails=3 fail_timeout=30s;
    keepalive 32;
}

upstream billing_backend {
    least_conn;
    server billing-service:3003 max_fails=3 fail_timeout=30s;
    keepalive 32;
}

upstream analytics_backend {
    least_conn;
    server analytics-service:3004 max_fails=3 fail_timeout=30s;
    keepalive 32;
}

upstream orchestrator_backend {
    least_conn;
    server orchestrator-service:3006 max_fails=3 fail_timeout=30s;
    keepalive 32;
}

upstream kong_backend {
    least_conn;
    server kong:8000 max_fails=3 fail_timeout=30s;
    keepalive 32;
}
