[36m╔═══════════════════════════════════════════════════════════╗[0m
[36m║         🧪 FULL INTEGRATION TEST SUITE                   ║[0m
[36m║         Testing All Microservices + Analytics            ║[0m
[36m╚═══════════════════════════════════════════════════════════╝[0m
[36m
📊 Phase 1: Health Checks[0m
[36m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m
[31m❌ Auth Service health check - Error[0m
[32m✅ Chat Service is healthy[0m
[32m✅ Billing Service is healthy[0m
[32m✅ Analytics Service is healthy[0m
[36m
🔐 Phase 2: Auth Service Integration[0m
[36m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m
[31m❌ User 1: Auth flow - Error[0m
[31m❌ User 2: Auth flow - Error[0m
[31m❌ User 3: Auth flow - Error[0m
[31m❌ User 4: Auth flow - Error[0m
[31m❌ User 5: Auth flow - Error[0m
[31m❌ User 6: Auth flow - Error[0m
[31m❌ User 7: Auth flow - Error[0m
[31m❌ User 8: Auth flow - Error[0m
[31m❌ User 9: Auth flow - Error[0m
[31m❌ User 10: Auth flow - Error[0m
[36m
💬 Phase 3: Chat Service Integration[0m
[36m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m
[36m
💳 Phase 4: Billing Service Integration[0m
[36m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m
[36m
📊 Phase 5: Analytics Data Verification[0m
[36m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m
[36m  → Waiting 5 seconds for event processing...[0m
[32m✅ User count analytics (Total: 28)[0m
[32m✅ Chat messages analytics (Total: 0)[0m
[32m✅ Revenue analytics (Total: 0)[0m
[31m❌ Analytics verification - Unknown table expression identifier 'analytics_db.provider_metrics' in scope SELECT ai_provider, count() AS total_requests, sum(tokens_used) AS total_tokens, avg(response_time_ms) AS avg_response_time, uniq(user_id) AS unique_users FROM analytics_db.provider_metrics WHERE ai_provider != '' GROUP BY ai_provider ORDER BY total_requests DESC. [0m
[36m
📈 Phase 6: Comprehensive Analytics API Test[0m
[36m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[0m
[32m  ✓ User Growth[0m
[33m  ⚠ Active Users (DAU) - 500[0m
[32m  ✓ User Signups[0m
[32m  ✓ Top Users[0m
[33m  ⚠ Messages by Provider - 500[0m
[33m  ⚠ Messages by Model - 500[0m
[32m  ✓ Chat Activity[0m
[32m  ✓ Token Usage by Plan[0m
[32m  ✓ MRR[0m
[32m  ✓ Revenue by Plan[0m
[32m  ✓ Subscription Stats[0m
[33m  ⚠ Provider Performance - 500[0m
[33m  ⚠ Provider Cost - 500[0m
[33m  ⚠ Popular Models - 500[0m
[32m✅ At least 50% of Analytics APIs working (8/14)[0m
[36m
╔═══════════════════════════════════════════════════════════╗[0m
[36m║                   📊 TEST RESULTS                         ║[0m
[36m╚═══════════════════════════════════════════════════════════╝[0m
[36m
⏱️  Duration: 8.48s[0m
[32m✅ Passed: 7[0m
[31m❌ Failed: 12[0m
[36m
📈 Data Generated:[0m
[36m   → Users created: 0[0m
[36m   → Conversations: 0[0m
[36m   → Messages sent: 0[0m
[36m   → Subscriptions: 0[0m
[36m   → Events published (estimated): 0[0m
[33m
⚠️  Failed Tests:[0m
[31m   - Auth Service health check - Error[0m
[31m   - User 1: Auth flow - Error[0m
[31m   - User 2: Auth flow - Error[0m
[31m   - User 3: Auth flow - Error[0m
[31m   - User 4: Auth flow - Error[0m
[31m   - User 5: Auth flow - Error[0m
[31m   - User 6: Auth flow - Error[0m
[31m   - User 7: Auth flow - Error[0m
[31m   - User 8: Auth flow - Error[0m
[31m   - User 9: Auth flow - Error[0m
[31m   - User 10: Auth flow - Error[0m
[31m   - Analytics verification - Unknown table expression identifier 'analytics_db.provider_metrics' in scope SELECT ai_provider, count() AS total_requests, sum(tokens_used) AS total_tokens, avg(response_time_ms) AS avg_response_time, uniq(user_id) AS unique_users FROM analytics_db.provider_metrics WHERE ai_provider != '' GROUP BY ai_provider ORDER BY total_requests DESC. [0m
[33m
🎯 Success Rate: 36.8%[0m
[31m
❌ System needs significant fixes[0m
[36m
════════════════════════════════════════════════════════════[0m
[36m📄 Results saved to: INTEGRATION_TEST_RESULTS.json[0m
