# =============================================================================
# EMAIL WORKER - Environment Variables
# Background Service (no HTTP port)
# =============================================================================
#
# Copy this file to .env and fill in your values
# Most variables can be inherited from root .env file
#
# =============================================================================

# =============================================================================
# WORKER CONFIGURATION
# =============================================================================
NODE_ENV=development
LOG_LEVEL=info

# Worker concurrency (number of parallel jobs)
EMAIL_WORKER_CONCURRENCY=5

# =============================================================================
# MESSAGE QUEUE - RabbitMQ
# =============================================================================
# For consuming email jobs (REQUIRED)
RABBITMQ_URL=amqp://admin:admin@localhost:5672
RABBITMQ_EXCHANGE=email.jobs
RABBITMQ_QUEUE=email_jobs_queue
RABBITMQ_PREFETCH=10
RABBITMQ_HEARTBEAT=60

# =============================================================================
# SMTP EMAIL CONFIGURATION
# =============================================================================
# SMTP server settings (REQUIRED for sending emails)

# Gmail Example (for development)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-specific-password

# Sender information
SMTP_FROM=noreply@yourdomain.com
SMTP_FROM_NAME=My SaaS Chat

# =============================================================================
# EMAIL SERVICE PROVIDERS (Alternative to SMTP)
# =============================================================================

# SendGrid (Optional - recommended for production)
# SENDGRID_API_KEY=your-sendgrid-api-key

# Mailgun (Optional)
# MAILGUN_API_KEY=your-mailgun-api-key
# MAILGUN_DOMAIN=your-mailgun-domain

# AWS SES (Optional)
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key

# =============================================================================
# EMAIL TEMPLATES
# =============================================================================
# Base URL for email links
FRONTEND_URL=http://localhost:3000

# Template directory (optional)
EMAIL_TEMPLATE_DIR=/app/templates

# =============================================================================
# REDIS (Optional - for rate limiting & deduplication)
# =============================================================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=1
REDIS_KEY_PREFIX=email:

# =============================================================================
# MONITORING & OBSERVABILITY (Optional)
# =============================================================================

# Sentry Error Tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_DEBUG=false

# =============================================================================
# RETRY & RATE LIMITING
# =============================================================================
# Email sending retry configuration
EMAIL_MAX_RETRIES=3
EMAIL_RETRY_DELAY=5000
EMAIL_RETRY_BACKOFF=exponential

# Rate limiting (emails per minute)
EMAIL_RATE_LIMIT_PER_MINUTE=100

# =============================================================================
# NOTES
# =============================================================================
# - This is a background worker (no HTTP server)
# - Consumes email jobs from RabbitMQ queue
# - Required: RABBITMQ_URL, SMTP_HOST, SMTP_USER, SMTP_PASSWORD
# - Gmail requires "App Passwords" - see: https://support.google.com/accounts/answer/185833
# - For production, use SendGrid, Mailgun, or AWS SES
# - See docs/CONFIGURATION.md for complete reference
