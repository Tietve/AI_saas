# =============================================================================
# EMAIL WORKER - PRODUCTION ENVIRONMENT
# =============================================================================
# This file contains service-specific overrides for production
# Inherits from root .env file
# =============================================================================

# Service Configuration
NODE_ENV=production
SERVICE_NAME=email-worker

# RabbitMQ Configuration
RABBITMQ_URL=amqp://${RABBITMQ_DEFAULT_USER}:${RABBITMQ_DEFAULT_PASS}@rabbitmq:5672
RABBITMQ_EXCHANGE=email.events
RABBITMQ_QUEUE=email_queue
RABBITMQ_DEAD_LETTER_EXCHANGE=email.dlx
RABBITMQ_DEAD_LETTER_QUEUE=email_dlq
RABBITMQ_PREFETCH_COUNT=5
RABBITMQ_RETRY_ATTEMPTS=3
RABBITMQ_RETRY_DELAY=5000

# Redis (For job tracking)
REDIS_URL=redis://redis:6379/5
REDIS_PASSWORD=
REDIS_DB=5

# SMTP Configuration
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=${SMTP_PORT}
SMTP_SECURE=false
SMTP_USER=${SMTP_USER}
SMTP_PASS=${SMTP_PASS}
SMTP_FROM=${SMTP_FROM}
SMTP_FROM_NAME=${SMTP_FROM_NAME}

# Email Service Provider (Alternative)
# SENDGRID_API_KEY=${SENDGRID_API_KEY}
# MAILGUN_API_KEY=${MAILGUN_API_KEY}
# MAILGUN_DOMAIN=${MAILGUN_DOMAIN}

# Email Configuration
EMAIL_RATE_LIMIT=100  # Max emails per minute
EMAIL_BATCH_SIZE=10
EMAIL_RETRY_ATTEMPTS=3
EMAIL_RETRY_DELAY=60000  # 1 minute

# Template Configuration
TEMPLATE_DIR=/app/templates
DEFAULT_TEMPLATE_LANGUAGE=en
SUPPORTED_LANGUAGES=en,vi

# Email Types
SEND_WELCOME_EMAIL=true
SEND_VERIFICATION_EMAIL=true
SEND_PASSWORD_RESET_EMAIL=true
SEND_SUBSCRIPTION_EMAIL=true
SEND_PAYMENT_EMAIL=true
SEND_NOTIFICATION_EMAIL=true

# Monitoring
SENTRY_DSN=${SENTRY_DSN}
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Logging
LOG_LEVEL=info

# Email Tracking
TRACK_OPENS=true
TRACK_CLICKS=true
TRACKING_DOMAIN=https://yourdomain.com

# Health Check (For worker)
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=60000

# Worker Configuration
WORKER_CONCURRENCY=5
WORKER_RESTART_ON_ERROR=true
WORKER_MAX_RETRIES=3
