# ==========================================
# PRODUCTION ENVIRONMENT TEMPLATE
# ==========================================
# Copy this file and fill with actual values for production deployment
# NEVER commit the actual .env.production file with real secrets!
#
# For detailed documentation, see: docs/ENVIRONMENT_VARS.md
# For deployment guides:
#   - Vercel: scripts/deploy-vercel.md
#   - Azure: scripts/deploy-azure.md
#
# ==========================================

# ==========================================
# CORE CONFIGURATION
# ==========================================

NODE_ENV=production

# App URLs (MUST match your production domain)
NEXT_PUBLIC_APP_URL=https://your-app.vercel.app
APP_URL=https://your-app.vercel.app

# Logging
LOG_LEVEL=info

# ==========================================
# DATABASE (Neon PostgreSQL)
# ==========================================

# PostgreSQL connection string with production settings
# Get from: Neon.tech dashboard → Connection Details
# IMPORTANT: Use POOLER endpoint (ends with -pooler.ap-southeast-1.aws.neon.tech)
# IMPORTANT: Set connection_limit=1 for Azure App Service (prevents connection pool exhaustion)
# IMPORTANT: Use sslmode=require, DO NOT use channel_binding=require
DATABASE_URL=postgresql://USER:PASSWORD@ep-xxx-xxx-pooler.ap-southeast-1.aws.neon.tech/DBNAME?sslmode=require&connection_limit=1

# ==========================================
# AUTHENTICATION & SECURITY
# ==========================================

# Generate with: openssl rand -base64 32
# MUST be 32+ characters, cryptographically random
AUTH_SECRET=REPLACE_WITH_GENERATED_SECRET_32_CHARS_MIN

# Cookie name (default: session)
AUTH_COOKIE_NAME=session

# ==========================================
# CORS (Azure Backend Only)
# ==========================================

# Comma-separated allowed origins
# Only needed if deploying separate Azure backend
# CORS_ALLOWED_ORIGINS=https://your-app.vercel.app,https://www.yourdomain.com

# ==========================================
# AI PROVIDERS (At least ONE required)
# ==========================================

# OpenAI (Recommended)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-REPLACE_WITH_YOUR_KEY

# Anthropic Claude (Optional)
# Get from: https://console.anthropic.com/account/keys
# ANTHROPIC_API_KEY=sk-ant-REPLACE_WITH_YOUR_KEY

# Google Gemini (Optional)
# Get from: https://makersuite.google.com/app/apikey
# GOOGLE_API_KEY=AIza_REPLACE_WITH_YOUR_KEY

# Groq (Optional - Fast inference)
# Get from: https://console.groq.com/keys
# GROQ_API_KEY=gsk_REPLACE_WITH_YOUR_KEY

# X.AI Grok (Optional)
# Get from: https://x.ai/api
# XAI_API_KEY=xai-REPLACE_WITH_YOUR_KEY

# AI Configuration
AI_PROVIDER=openai
AI_MODEL=gpt-4o-mini
AI_TIMEOUT_MS=45000
# INTENT_MODEL=gpt-4o-mini

# ==========================================
# EMAIL CONFIGURATION
# ==========================================

# Enable email verification
REQUIRE_EMAIL_VERIFICATION=false

# ----------------------------------------
# OPTION 1: SMTP (Traditional)
# ----------------------------------------

# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_SECURE=true
# SMTP_USER=noreply@yourdomain.com
# SMTP_PASS=your-app-specific-password
# SMTP_FROM="Your App Name <noreply@yourdomain.com>"

# ----------------------------------------
# OPTION 2: Resend (Modern, Recommended)
# ----------------------------------------

# Get from: https://resend.com/api-keys
# RESEND_API_KEY=re_REPLACE_WITH_YOUR_KEY

# ==========================================
# PAYMENT GATEWAY (PayOS)
# ==========================================

# Get from: PayOS Dashboard (https://my.payos.vn/)
# Required if enabling subscription features

# PAYOS_CLIENT_ID=your_client_id
# PAYOS_API_KEY=your_api_key
# PAYOS_CHECKSUM_KEY=your_checksum_key
# PAYOS_WEBHOOK_SECRET=your_webhook_secret

# ==========================================
# STORAGE (Choose ONE option)
# ==========================================

# ----------------------------------------
# OPTION 1: Cloudflare R2 (Recommended for Vercel)
# ----------------------------------------

# Get from: Cloudflare Dashboard
# R2_ACCOUNT_ID=your_cloudflare_account_id
# R2_ACCESS_KEY_ID=your_r2_access_key
# R2_SECRET_ACCESS_KEY=your_r2_secret_key
# R2_BUCKET_NAME=your-bucket-name
# R2_PUBLIC_URL=https://uploads.yourdomain.com

# ----------------------------------------
# OPTION 2: Azure Blob Storage (For Azure App Service)
# ----------------------------------------

# Get from: Azure Portal → Storage Accounts
# AZURE_STORAGE_ACCOUNT_NAME=yourstorageaccount
# AZURE_STORAGE_ACCOUNT_KEY=your_storage_account_key
# OR use connection string:
# AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=...;AccountKey=...
# AZURE_BLOB_CONTAINER_NAME=uploads

# ==========================================
# CACHING & RATE LIMITING (Upstash Redis)
# ==========================================

# Get from: https://console.upstash.com
# REQUIRED for production (enables distributed rate limiting)
UPSTASH_REDIS_REST_URL=https://your-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=REPLACE_WITH_YOUR_TOKEN

# Rate limiting configuration
# RATE_PM=60
# MAX_HISTORY=20

# ==========================================
# MONITORING & ERROR TRACKING
# ==========================================

# Sentry (Server-side)
# Get from: https://sentry.io
# SENTRY_DSN=https://your-key@o123456.ingest.sentry.io/123456
# SENTRY_AUTH_TOKEN=your_sentry_auth_token

# Sentry (Client-side)
# NEXT_PUBLIC_SENTRY_DSN=https://your-key@o123456.ingest.sentry.io/123456

# ==========================================
# ANALYTICS (Client-side)
# ==========================================

# Google Analytics
# NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX

# PostHog
# NEXT_PUBLIC_POSTHOG_KEY=phc_REPLACE_WITH_YOUR_KEY
# NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# ==========================================
# CLOUDFLARE SERVICES
# ==========================================

# Cloudflare API
# CLOUDFLARE_API_TOKEN=your_api_token
# CLOUDFLARE_ZONE_ID=your_zone_id

# Cloudflare Turnstile (CAPTCHA)
# Get from: Cloudflare Dashboard → Turnstile
# CLOUDFLARE_TURNSTILE_SECRET=your_secret_key
# NEXT_PUBLIC_CLOUDFLARE_TURNSTILE_SITE_KEY=your_site_key

# ==========================================
# AZURE-SPECIFIC (For Azure App Service)
# ==========================================

# Azure Application Insights
# Get from: Azure Portal
# AZURE_APP_INSIGHTS_KEY=your_insights_key

# Azure Key Vault (For secret management)
# AZURE_KEY_VAULT_URL=https://your-vault.vault.azure.net

# ==========================================
# FEATURE FLAGS (Client-side)
# ==========================================

# NEXT_PUBLIC_ENABLE_ANALYTICS=true
# NEXT_PUBLIC_ENABLE_CHAT_EXPORT=true
# NEXT_PUBLIC_MAX_FILE_SIZE_MB=10
# NEXT_PUBLIC_CDN_URL=https://cdn.yourdomain.com
# NEXT_PUBLIC_R2_PUBLIC_URL=https://uploads.yourdomain.com

# ==========================================
# DEVELOPMENT FLAGS
# ==========================================
# WARNING: NEVER enable these in production!
# ==========================================

# Mock AI responses (DEV ONLY)
MOCK_AI=0

# Bypass payment checks (DEV ONLY)
DEV_BYPASS_PAY=0

# Bypass rate limits (DEV ONLY)
DEV_BYPASS_LIMIT=0

# Debug logging (DEV ONLY)
DEBUG_OPENAI=0

# ==========================================
# DEPLOYMENT CHECKLIST
# ==========================================
#
# Before deploying to production:
#
# [ ] All REPLACE_WITH_YOUR_* placeholders filled
# [ ] AUTH_SECRET generated with: openssl rand -base64 32
# [ ] Database URL includes connection pooling params
# [ ] At least one AI provider key configured
# [ ] Redis/Upstash configured for rate limiting
# [ ] Storage provider configured (R2 or Azure Blob)
# [ ] Email provider configured (if verification enabled)
# [ ] All development flags set to 0
# [ ] HTTPS enabled for all URLs
# [ ] Run: npm run env:verify -- --strict
# [ ] Run: npm run verify:production (after deployment)
#
# ==========================================
# QUICK DEPLOYMENT COMMANDS
# ==========================================
#
# Verify environment before deploy:
#   npm run env:verify -- --strict
#
# Deploy to Vercel:
#   vercel --prod
#   (Set environment variables in Vercel Dashboard)
#
# Deploy to Azure:
#   See: scripts/deploy-azure.md
#
# Test after deployment:
#   NEXT_PUBLIC_APP_URL=https://your-app.vercel.app npm run verify:production
#
# ==========================================
