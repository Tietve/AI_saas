# =============================================================================
# AUTH SERVICE - Environment Variables
# Port: 3001
# =============================================================================
#
# Copy this file to .env and fill in your values
# Most variables can be inherited from root .env file
#
# =============================================================================

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=3001
NODE_ENV=development
LOG_LEVEL=info

# =============================================================================
# DATABASE - PostgreSQL
# =============================================================================
# PostgreSQL connection URL (REQUIRED)
# Format: postgresql://username:password@hostname:port/database
DATABASE_URL=postgresql://postgres:password@localhost:5432/saas_auth_db

# Connection Pool Settings (optional)
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_TIMEOUT=30000

# =============================================================================
# CACHE - Redis
# =============================================================================
# Redis connection URL (REQUIRED for sessions)
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=auth:
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
# Generate strong secrets with: openssl rand -base64 48
# MINIMUM 32 characters in production!

# Main authentication secret (REQUIRED)
AUTH_SECRET=your-256-bit-secret-key-here-change-this-in-production

# JWT tokens (REQUIRED)
JWT_SECRET=your-jwt-secret-key-here-change-this-in-production
REFRESH_TOKEN_SECRET=your-refresh-token-secret-here-change-this

# Token expiry
JWT_EXPIRY=15m
REFRESH_TOKEN_EXPIRY=7d
PASSWORD_RESET_EXPIRY=1h

# Account security
REQUIRE_EMAIL_VERIFICATION=false
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION=30m

# =============================================================================
# MESSAGE QUEUE - RabbitMQ
# =============================================================================
# For publishing analytics events (REQUIRED)
RABBITMQ_URL=amqp://admin:admin@localhost:5672
RABBITMQ_EXCHANGE=analytics.events

# =============================================================================
# OAUTH PROVIDERS (Optional)
# =============================================================================

# Google OAuth (optional)
GOOGLE_CLIENT_ID=your-google-oauth-client-id
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret
GOOGLE_REDIRECT_URI=http://localhost:3000/auth/google/callback

# GitHub OAuth (optional)
GITHUB_CLIENT_ID=your-github-oauth-client-id
GITHUB_CLIENT_SECRET=your-github-oauth-client-secret
GITHUB_REDIRECT_URI=http://localhost:3000/auth/github/callback

# =============================================================================
# MONITORING & OBSERVABILITY (Optional)
# =============================================================================

# Sentry Error Tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1
SENTRY_DEBUG=false

# Jaeger Distributed Tracing
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831
JAEGER_SAMPLER_TYPE=probabilistic
JAEGER_SAMPLER_PARAM=0.1
JAEGER_SERVICE_NAME=auth-service

# Prometheus Metrics
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090
PROMETHEUS_PATH=/metrics

# =============================================================================
# EMAIL (For verification emails)
# =============================================================================
# Note: Email worker service handles actual sending
# Auth service just publishes events to queue

SMTP_FROM=noreply@yourdomain.com
SMTP_FROM_NAME=My SaaS Chat

# =============================================================================
# FRONTEND & CORS
# =============================================================================
FRONTEND_URL=http://localhost:3000
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true

# =============================================================================
# SECURITY HEADERS
# =============================================================================
HELMET_ENABLED=true
CSP_ENABLED=true
HSTS_MAX_AGE=31536000

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# =============================================================================
# NOTES
# =============================================================================
# - This service handles: User registration, login, JWT tokens, OAuth
# - Required: DATABASE_URL, REDIS_URL, AUTH_SECRET, JWT_SECRET
# - Publishes events to RabbitMQ for analytics
# - See docs/CONFIGURATION.md for complete reference
