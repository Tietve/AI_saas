@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

/* Core Design System - Thứ tự quan trọng! */
@import '../styles/design-system.css';
@import '../styles/base.css';
@import '../styles/utilities.css';

/* Component Styles */
@import '../styles/components/index.css';

/* Tạm thời giữ animations.css nếu cần */
@import '../styles/animations.css';

/* KHÔNG import theme-override.css vì sẽ conflict với design system mới */

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        --radius: 0.625rem;

        
        --background: 255 255 255;
        --foreground: 0 0 0;

        
        --primary: 37 99 235;
        --primary-foreground: 248 250 252;
        --secondary: 240 240 240;
        --secondary-foreground: 24 24 24;
        --muted: 245 245 245;
        --muted-foreground: 115 115 115;
        --accent: 240 240 240;
        --accent-foreground: 24 24 24;
        --destructive: 239 68 68;
        --border: 229 229 229;
        --input: 229 229 229;
        --ring: 37 99 235;

        --color-success: #10b981;
        --color-success-light: #d1fae5;

        /* Spacing */
        --space-1-5: 0.375rem; /* 6px */

        /* Text sizes */
        --text-xs: 0.75rem; /* 12px */
        
        --color-primary: #D4AF37;
        --color-primary-hover: #F4CF57;
        --color-background: #0A0E1A;
        --color-background-secondary: #151B2C;
        --color-surface: #2A3655;
        --color-text: #F8F9FA;
        --color-text-secondary: #B8C1D1;
        --color-accent: #8B7355;
        --color-border: #2A3655;
        --color-success: #4ADE80;
        --color-error: #F87171;
        --color-warning: #FBBF24;
    }

    .dark {
        --background: 0 0 0;
        --foreground: 248 250 252;
        --primary: 96 165 250;
        --primary-foreground: 248 250 252;
        --secondary: 38 38 38;
        --secondary-foreground: 248 250 252;
        --muted: 38 38 38;
        --muted-foreground: 163 163 163;
        --accent: 38 38 38;
        --accent-foreground: 248 250 252;
        --destructive: 248 113 113;
        --border: 38 38 38;
        --input: 38 38 38;
        --ring: 96 165 250;
    }

    * {
        @apply border-border;
    }

    body {
        @apply bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-100;
        font-family: system-ui, -apple-system, sans-serif;
    }
}


.theme-override {
    
    * {
        transition: background-color 0.3s ease,
        color 0.3s ease,
        border-color 0.3s ease !important;
    }
}


.theme-override body,
html.theme-override body {
    background-color: var(--color-background) !important;
    color: var(--color-text) !important;
}


.theme-override .bg-white,
.theme-override .bg-gray-50,
.theme-override .bg-gray-100,
.theme-override .bg-slate-50 {
    background-color: var(--color-surface) !important;
}

.theme-override .bg-gray-200,
.theme-override .bg-gray-300 {
    background-color: var(--color-background-secondary) !important;
}

.theme-override .dark\:bg-gray-900,
.theme-override .dark\:bg-gray-800,
.theme-override .dark\:bg-slate-900 {
    background-color: var(--color-background-secondary) !important;
}

.theme-override .dark\:bg-gray-700 {
    background-color: var(--color-surface) !important;
}


.theme-override .text-gray-900,
.theme-override .text-gray-800,
.theme-override .text-black,
.theme-override .text-slate-900 {
    color: var(--color-text) !important;
}

.theme-override .dark\:text-gray-100,
.theme-override .dark\:text-gray-50,
.theme-override .dark\:text-white {
    color: var(--color-text) !important;
}

.theme-override .text-gray-600,
.theme-override .text-gray-500,
.theme-override .text-slate-600 {
    color: var(--color-text-secondary) !important;
}

.theme-override .dark\:text-gray-400,
.theme-override .dark\:text-gray-300 {
    color: var(--color-text-secondary) !important;
}


.theme-override .border-gray-200,
.theme-override .border-gray-300,
.theme-override .border-slate-200 {
    border-color: var(--color-border) !important;
}

.theme-override .dark\:border-gray-700,
.theme-override .dark\:border-gray-600 {
    border-color: var(--color-border) !important;
}


.theme-override .hover\:bg-gray-50:hover,
.theme-override .hover\:bg-gray-100:hover {
    background-color: var(--color-surface) !important;
}

.theme-override .dark\:hover\:bg-gray-800:hover,
.theme-override .dark\:hover\:bg-gray-700:hover {
    background-color: var(--color-surface) !important;
}


.theme-override .focus\:border-blue-500:focus,
.theme-override .focus\:ring-blue-500:focus {
    border-color: var(--color-primary) !important;
    --tw-ring-color: var(--color-primary) !important;
}


.theme-override button:not(.no-theme-override),
.theme-override .btn-primary {
    background-color: var(--color-primary) !important;
    color: var(--color-background) !important;
    border-color: var(--color-primary) !important;
}

.theme-override button:not(.no-theme-override):hover,
.theme-override .btn-primary:hover {
    background-color: var(--color-primary-hover) !important;
}

.theme-override button:disabled {
    opacity: 0.5 !important;
    cursor: not-allowed !important;
}


.theme-override input:not([type="checkbox"]):not([type="radio"]),
.theme-override textarea,
.theme-override select {
    background-color: var(--color-surface) !important;
    color: var(--color-text) !important;
    border-color: var(--color-border) !important;
}

.theme-override input:not([type="checkbox"]):not([type="radio"]):focus,
.theme-override textarea:focus,
.theme-override select:focus {
    border-color: var(--color-primary) !important;
    outline: none !important;
    box-shadow: 0 0 0 3px var(--color-primary) !important;
    box-shadow: 0 0 0 3px rgb(from var(--color-primary) r g b / 0.1) !important;
}


@layer components {
    
    .theme-selector {
        @apply relative;
    }

    .theme-trigger {
        @apply flex items-center gap-2 px-4 py-2 text-sm rounded-lg cursor-pointer transition-all;
        background: var(--color-surface);
        color: var(--color-text);
        border: 1px solid var(--color-border);
    }

    .theme-trigger:hover {
        background: var(--color-background-secondary);
        border-color: var(--color-primary);
    }

    .theme-dropdown {
        @apply absolute top-full right-0 mt-2 p-2 min-w-[200px] rounded-lg shadow-xl z-50;
        background: var(--color-surface);
        border: 1px solid var(--color-border);
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.2s;
    }

    .theme-dropdown.active {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    .theme-option {
        @apply flex items-center gap-3 w-full p-2 rounded-md cursor-pointer transition-all text-left;
        background: transparent;
        color: var(--color-text);
        border: none;
    }

    .theme-option:hover {
        background: var(--color-background-secondary);
    }

    .theme-option.active {
        background: var(--color-primary);
        color: var(--color-background);
    }

    .theme-preview {
        @apply flex gap-1;
    }

    .color-dot {
        @apply w-4 h-4 rounded-full border border-white/20;
    }

    .theme-name {
        @apply flex-1 text-sm;
    }
}


.theme-override .chat-container {
    background: var(--color-background) !important;
    color: var(--color-text) !important;
}

/* Noble Dark hard overrides to avoid bright surfaces */
[data-theme*="noble"],
.theme-override[data-theme*="noble"] {
    --color-background: #0b1220;
    --color-background-secondary: #0e1526;
    --color-surface: #121b31;
    --color-text: #e6ebff;
    --color-text-secondary: #9fb0d1;
    --color-border: #1e2a47;
}

.theme-override .chat-main-area {
    background: var(--color-background) !important;
}

.theme-override .chat-mobile-overlay {
    background: rgba(0, 0, 0, 0.5) !important;
}

.theme-override .chat-error-message {
    background: var(--color-error) !important;
    background-opacity: 0.1;
    border-color: var(--color-error) !important;
    color: var(--color-error) !important;
}

.theme-override .chat-error-close {
    color: var(--color-error) !important;
}

.theme-override .chat-sidebar {
    background: var(--color-background-secondary) !important;
    border-right: 1px solid var(--color-border) !important;
}

.theme-override .chat-sidebar-header {
    background: var(--color-background-secondary) !important;
    border-bottom: 1px solid var(--color-border) !important;
}

.theme-override .chat-sidebar-footer {
    background: var(--color-background-secondary) !important;
    border-top: 1px solid var(--color-border) !important;
}

.theme-override .chat-new-button {
    background: var(--color-primary) !important;
    background-image: linear-gradient(to right, var(--color-primary), var(--color-primary-hover)) !important;
    color: var(--color-background) !important;
}

.theme-override .chat-new-button:hover {
    background-image: linear-gradient(to right, var(--color-primary-hover), var(--color-accent)) !important;
}

.theme-override .chat-signout-button {
    background: var(--color-surface) !important;
    color: var(--color-text) !important;
}

.theme-override .chat-signout-button:hover {
    background: var(--color-accent) !important;
    opacity: 0.8;
}

.theme-override .chat-header {
    background: var(--color-surface) !important;
    border-bottom: 1px solid var(--color-border) !important;
}

.theme-override .chat-messages-area {
    background: var(--color-background) !important;
}

.theme-override .chat-messages-container {
    
}

/* Chat message separators */
.theme-override .message-separator-line {
    height: 1px;
    width: 100%;
    background: var(--color-border);
}
.theme-override .message-separator-label {
    position: absolute;
    padding: 2px 8px;
    font-size: 11px;
    border-radius: 9999px;
    color: var(--color-text-secondary);
    background: var(--color-background);
    border: 1px solid var(--color-border);
}

/* Artifact card styling */
.theme-override .artifact-card {
    border: 1px solid var(--color-border);
    background: var(--color-surface);
    border-radius: 12px;
    box-shadow: 0 1px 4px rgba(0,0,0,0.12);
    overflow: hidden;
}
.theme-override .artifact-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 10px;
    background: var(--color-background-secondary);
    border-bottom: 1px solid var(--color-border);
}
.theme-override .artifact-title {
    font-size: 12px;
    color: var(--color-text-secondary);
}
.theme-override .artifact-actions {
    display: flex;
    gap: 6px;
}
.theme-override .artifact-action {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    border-radius: 8px;
    color: var(--color-text-secondary);
    background: transparent;
    border: 1px solid var(--color-border);
}
.theme-override .artifact-action:hover {
    background: var(--color-surface);
}
.theme-override .artifact-content {
    margin: 0;
    padding: 12px;
    font-size: 12px;
    line-height: 1.5;
    color: var(--color-text);
    white-space: pre-wrap;
}

/* Document Canvas styling */
.theme-override .document-canvas {
    border: 1px solid var(--color-border);
    background: var(--color-surface);
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    overflow: hidden;
    margin: 8px 0;
}
.theme-override .document-canvas-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: var(--color-background-secondary);
    border-bottom: 1px solid var(--color-border);
}
.theme-override .document-canvas-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--color-text);
}
.theme-override .document-canvas-actions {
    display: flex;
    gap: 8px;
}
.theme-override .document-canvas-action {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: 8px;
    color: var(--color-text-secondary);
    background: transparent;
    border: 1px solid var(--color-border);
    transition: all 0.2s;
}
.theme-override .document-canvas-action:hover {
    background: var(--color-surface);
    color: var(--color-text);
}
.theme-override .document-canvas-content {
    padding: 20px;
    color: var(--color-text);
    line-height: 1.6;
}
.theme-override .document-section {
    margin-bottom: 20px;
}
.theme-override .document-section-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: 8px;
}
.theme-override .document-section-content {
    color: var(--color-text-secondary);
}
.theme-override .document-text {
    margin: 0;
    font-size: 14px;
}
.theme-override .document-list {
    margin: 0;
    padding-left: 20px;
}
.theme-override .document-list-item {
    margin-bottom: 4px;
    font-size: 14px;
}
.theme-override .document-code {
    background: var(--color-background-secondary);
    border: 1px solid var(--color-border);
    border-radius: 8px;
    padding: 12px;
    margin: 0;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 13px;
    overflow-x: auto;
}
.theme-override .document-canvas-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: var(--color-background-secondary);
    border-top: 1px solid var(--color-border);
}
.theme-override .document-comment-button,
.theme-override .document-edit-button {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 12px;
    color: var(--color-text-secondary);
    background: transparent;
    border: 1px solid var(--color-border);
    transition: all 0.2s;
}
.theme-override .document-comment-button:hover,
.theme-override .document-edit-button:hover {
    background: var(--color-surface);
    color: var(--color-text);
}

.theme-override .conversation-item {
    background: transparent !important;
    color: var(--color-text-secondary) !important;
    border-left: 4px solid transparent !important;
}

.theme-override .conversation-item:hover {
    background: var(--color-surface) !important;
    color: var(--color-text) !important;
}

.theme-override .conversation-item.active {
    background: var(--color-surface) !important;
    border-left-color: var(--color-primary) !important;
}

.theme-override .conversation-item.active .conversation-item-title {
    color: var(--color-primary) !important;
}

.theme-override .conversation-item-title {
    color: var(--color-text) !important;
}

.theme-override .conversation-item-meta {
    color: var(--color-text-secondary) !important;
}

.theme-override .conversation-item-delete {
    background: transparent !important;
}

.theme-override .conversation-item-delete:hover {
    background: var(--color-error) !important;
    opacity: 0.2;
}

.theme-override .chat-message {
    background: transparent !important;
    color: var(--color-text) !important;
}

.theme-override .chat-message:hover {
    background: var(--color-surface) !important;
    background-opacity: 0.5;
}

.theme-override .chat-message.user {
    background: var(--color-surface) !important;
    background-opacity: 0.3;
}

.theme-override .chat-message.user:hover {
    background: var(--color-surface) !important;
    background-opacity: 0.5;
}

.theme-override .chat-message-author {
    color: var(--color-text) !important;
}

.theme-override .chat-message-time {
    color: var(--color-text-secondary) !important;
}

.theme-override .chat-message-model {
    background: var(--color-surface) !important;
    color: var(--color-text-secondary) !important;
}

.theme-override .chat-message-text {
    color: var(--color-text) !important;
}

.theme-override .user-avatar {
    background: var(--color-primary) !important;
    background-image: linear-gradient(135deg, var(--color-primary), var(--color-accent)) !important;
    color: var(--color-background) !important;
}

.theme-override .chat-input-container {
    background: var(--color-background) !important;
    border-top: 1px solid var(--color-border) !important;
}

.theme-override .chat-input {
    background: var(--color-surface) !important;
    color: var(--color-text) !important;
    border: 1px solid var(--color-border) !important;
}

.theme-override .chat-input:focus {
    border-color: var(--color-primary) !important;
    box-shadow: 0 0 0 3px rgb(from var(--color-primary) r g b / 0.1) !important;
}

.theme-override .chat-input::placeholder {
    color: var(--color-text-secondary) !important;
}

.theme-override .chat-kbd {
    background: var(--color-surface) !important;
    color: var(--color-text-secondary) !important;
    border: 1px solid var(--color-border) !important;
}


@layer utilities {
    .animate-in {
        animation: animateIn 0.3s ease-in-out;
    }

    .animate-out {
        animation: animateOut 0.3s ease-in-out;
    }

    @keyframes animateIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes animateOut {
        from {
            opacity: 1;
            transform: translateY(0);
        }
        to {
            opacity: 0;
            transform: translateY(10px);
        }
    }
}


::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    @apply bg-gray-100 dark:bg-gray-800;
}

.theme-override ::-webkit-scrollbar-track {
    background: var(--color-background-secondary) !important;
}

::-webkit-scrollbar-thumb {
    @apply bg-gray-400 dark:bg-gray-600 rounded-md;
}

.theme-override ::-webkit-scrollbar-thumb {
    background: var(--color-surface) !important;
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-500 dark:bg-gray-500;
}

.theme-override ::-webkit-scrollbar-thumb:hover {
    background: var(--color-accent) !important;
}


* {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.gray.400') theme('colors.gray.100');
}

.dark * {
    scrollbar-color: theme('colors.gray.600') theme('colors.gray.800');
}

.theme-override * {
    scrollbar-color: var(--color-surface) var(--color-background-secondary) !important;
}


.no-theme-override {
    all: revert !important;
}